{"openapi":"3.0.3","info":{"title":"Pictou API","description":"Pictou is a picture management application.","license":{"name":""},"version":"0.1.0"},"servers":[{"url":"/api"}],"paths":{"/albums":{"get":{"tags":["albums"],"summary":"Get a list of albums","description":"Get a list of albums","operationId":"get_albums","parameters":[{"name":"limit","in":"query","description":"Number of albums to return","required":false,"schema":{"type":"integer","format":"int32","nullable":true,"minimum":0},"example":10},{"name":"offset","in":"query","description":"Offset of the query in the albums list to return","required":false,"schema":{"type":"integer","format":"int32","nullable":true,"minimum":0},"example":0}],"responses":{"200":{"description":"Albums retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlbumList"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Query deserialize error: Unknown variant `lo`, expected one of `low`, `medium`, `high`","error_code":"QUERY_PAYLOAD_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}},"security":[{"JWT_Access_Token":[]}]},"post":{"tags":["albums"],"summary":"Create a new album","description":"Create a new album","operationId":"create_album","requestBody":{"description":"Album to create","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlbumPost"}}},"required":true},"responses":{"200":{"description":"Successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Album"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Json deserialize error:  missing field `name` at line 4 column 1","error_code":"JSON_PAYLOAD_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}},"security":[{"JWT_Access_Token":[]}]}},"/albums/{id}":{"get":{"tags":["albums"],"summary":"Get an album by its id.","description":"Get an album by its id.","operationId":"get_album","parameters":[{"name":"id","in":"path","description":"Identifier of the album","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"}],"responses":{"200":{"description":"Album retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Album"}}}},"400":{"description":"Invalid path parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"404":{"description":"Album not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Album with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]},"delete":{"tags":["albums"],"summary":"Delete an album","description":"Delete an album","operationId":"delete_album","parameters":[{"name":"id","in":"path","description":"Album to delete","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"}],"responses":{"204":{"description":"Successfully deleted"},"400":{"description":"Invalid path parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"403":{"description":"User has read only rights on the album (shared album)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with valid credentials but insufficient access rights","error_code":"FORBIDDEN_ERROR","http_status":403}}}},"404":{"description":"Album not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Album with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]},"patch":{"tags":["albums"],"summary":"Modify an album","description":"Modify an album","operationId":"edit_album","parameters":[{"name":"id","in":"path","description":"Album to edit","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"}],"requestBody":{"description":"Album to edit","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlbumPost"}}},"required":true},"responses":{"200":{"description":"Successfully patched","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Album"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"examples":{"Invalid path parameters":{"value":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}},"Invalid payload":{"value":{"description":"Json deserialize error: EOF while parsing an object at line 4 column 0","error_code":"JSON_PAYLOAD_ERROR","http_status":400}}}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"403":{"description":"User has read only rights on the album (shared album)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with valid credentials but insufficient access rights","error_code":"FORBIDDEN_ERROR","http_status":403}}}},"404":{"description":"Album not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Album with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]}},"/albums/{id}/images/{image_id}":{"post":{"tags":["albums"],"summary":"Add an image to an album","description":"Add an image to an album","operationId":"add_image_to_album","parameters":[{"name":"id","in":"path","description":"Album to add the image to","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"},{"name":"image_id","in":"path","description":"Image to add","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"}],"responses":{"200":{"description":"Successfully added","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Album"}}}},"400":{"description":"Invalid path parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"403":{"description":"User has read only rights on the image/album (shared image/album)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with valid credentials but insufficient access rights","error_code":"FORBIDDEN_ERROR","http_status":403}}}},"404":{"description":"Album or image not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Album with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]},"delete":{"tags":["albums"],"summary":"Remove an image from an album","description":"Remove an image from an album","operationId":"remove_image_from_album","parameters":[{"name":"id","in":"path","description":"Album to remove the image from","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"},{"name":"image_id","in":"path","description":"Image to remove","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"}],"responses":{"200":{"description":"Successfully added","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Album"}}}},"400":{"description":"Invalid path parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"403":{"description":"User has read only rights on the image/album (shared image/album)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with valid credentials but insufficient access rights","error_code":"FORBIDDEN_ERROR","http_status":403}}}},"404":{"description":"Album or image not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Album with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]}},"/auth/callback/{provider}":{"get":{"tags":["auth"],"summary":"OAuth2 callback endpoint. Must not be called directly.","description":"OAuth2 callback endpoint. Must not be called directly.\n\nThis endpoint is called by the OAuth provider after the user has authenticated.\nThis documentation is here to show the structure of the body received by this endpoint, not to call this endpoint.","operationId":"callback","parameters":[{"name":"provider","in":"path","required":true,"schema":{"type":"string","enum":["google"]},"style":"simple"}],"responses":{"200":{"description":"Google authentication succeeded and user can use the access token as a bearer.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthenticationResponse"}}}}}}},"/auth/login/{provider}":{"get":{"tags":["auth"],"summary":"*The* Authorization/Authentication endpoint.","description":"*The* Authorization/Authentication endpoint.\n\nUser information is sent to /auth/callback/{provider} when the user is authenticated.","operationId":"login","parameters":[{"name":"provider","in":"path","required":true,"schema":{"type":"string","enum":["google"]},"style":"simple"}],"responses":{"302":{"description":"Redirected to google authentication or to /auth/callback/<provider>"}}}},"/auth/logout":{"get":{"tags":["auth"],"summary":"Revoke the refresh token of the user.","description":"Revoke the refresh token of the user.\nThe user may still be authenticated with the access token (for up to 3 minutes, by default),\nbut the refresh token is invalidated.","operationId":"logout","responses":{"200":{"description":"Successfully logged out"},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}}}},"/auth/refresh":{"post":{"tags":["auth"],"summary":"Allows the user to request another access token after it expired.","description":"Allows the user to request another access token after it expired.\nThis route checks the opaque refresh token against the database before granting (or not) the new access token.","operationId":"refresh_token","requestBody":{"description":"User id and refresh token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenParams"}}},"required":true},"responses":{"200":{"description":"Successfully refreshed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthenticationResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"examples":{"Invalid path parameters":{"value":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}},"Invalid payload":{"value":{"description":"Json deserialize error: EOF while parsing an object at line 4 column 0","error_code":"JSON_PAYLOAD_ERROR","http_status":400}}}}}},"401":{"description":"Credentials are invalid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthError"}}}},"403":{"description":"OAuth provider rejected the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthError"}}}}}}},"/images":{"get":{"tags":["images"],"summary":"Get the images owned by or shared with the user","description":"Get the images owned by or shared with the user\n\nThis method returns the metadata of the images not the effective images. The client must make a request for each image independently.\nThe list can be filtered by quality, and paginated.","operationId":"get_images","parameters":[{"name":"limit","in":"query","description":"Number of images to return","required":false,"schema":{"type":"integer","format":"int32","nullable":true,"minimum":0},"example":10},{"name":"offset","in":"query","description":"Offset of the query in the image list to return","required":false,"schema":{"type":"integer","format":"int32","nullable":true,"minimum":0},"example":0},{"name":"quality","in":"query","description":"Image quality","required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/ImageQuality"}],"nullable":true},"example":"low"}],"responses":{"200":{"description":"Images retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImagesMetaData"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Query deserialize error: Unknown variant `lo`, expected one of `low`, `medium`, `high`","error_code":"QUERY_PAYLOAD_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}},"security":[{"JWT_Access_Token":[]}]},"post":{"tags":["images"],"summary":"Upload an image","description":"Upload an image","operationId":"upload_image","requestBody":{"description":"File to upload (binary data)","content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/ImagePayload"}}},"required":true},"responses":{"200":{"description":"Successfully uploaded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImageUploadResponse"}}}},"400":{"description":"Invalid image payload / encoding","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Image payoad too large: max 10MB","error_code":"IMAGE_PAYLOAD_TOO_LARGE","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"415":{"description":"Unsupported image format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Unsupported image type: supported types are JPEG, PNG, GIF, JPEG XL","error_code":"UNSUPPORTED_IMAGE_TYPE","http_status":400}}}}},"security":[{"JWT_Access_Token":[]}]}},"/images/{id}":{"get":{"tags":["images"],"summary":"Get an image by its id.","description":"Get an image by its id.","operationId":"get_image","parameters":[{"name":"id","in":"path","description":"Identifier of the image","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"},{"name":"quality","in":"query","description":"Image quality","required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/ImageQuality"}],"nullable":true},"example":"Low"}],"responses":{"200":{"description":"Image retrieved successfully","content":{"image/jpeg":{"schema":{"$ref":"#/components/schemas/Binary"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"examples":{"Invalid path parameters":{"value":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}},"Invalid query parameters":{"value":{"description":"Query deserialize error: Unknown variant `lo`, expected one of `low`, `medium`, `high`","error_code":"QUERY_PAYLOAD_ERROR","http_status":400}}}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"404":{"description":"Image not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Image with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]},"delete":{"tags":["images"],"summary":"Delete an image","description":"Delete an image","operationId":"delete_image","parameters":[{"name":"id","in":"path","description":"Image to delete","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"}],"responses":{"204":{"description":"Successfully deleted"},"400":{"description":"Invalid path parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"403":{"description":"User has read only rights on the image (shared image)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with valid credentials but insufficient access rights","error_code":"FORBIDDEN_ERROR","http_status":403}}}},"404":{"description":"Image not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Image with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]},"patch":{"tags":["images"],"summary":"Set/modfiy image metadata, share/unshare, ...","description":"Set/modfiy image metadata, share/unshare, ...","operationId":"edit_image","parameters":[{"name":"id","in":"path","description":"Image to edit","required":true,"schema":{"$ref":"#/components/schemas/Uuid"},"example":"e58ed763-928c-4155-bee9-fdbaaadc15f3"}],"requestBody":{"description":"Image to edit","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImagePatch"}}},"required":true},"responses":{"200":{"description":"Successfully patched","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImageMetaData"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"examples":{"Invalid path parameters":{"value":{"description":"Path deserialize error: can not parse \"a\" to a u16","error_code":"PATH_ERROR","http_status":400}},"Invalid payload":{"value":{"description":"Json deserialize error: EOF while parsing an object at line 4 column 0","error_code":"JSON_PAYLOAD_ERROR","http_status":400}}}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}},"403":{"description":"User has read only rights on the image (shared image)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"This resource is read-only for the current user","error_code":"READ_ONLY","http_status":403}}}},"404":{"description":"Image not found (or user is forbidden to see it)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Image with id 15 not found","error_code":"NOT_FOUND_ERROR","http_status":404}}}}},"security":[{"JWT_Access_Token":[]}]}},"/users":{"get":{"tags":["users"],"summary":"Get a list of users","description":"Get a list of users","operationId":"get_users","responses":{"200":{"description":"Users retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserList"}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}},"security":[{"JWT_Access_Token":[]}]}},"/users/self":{"get":{"tags":["users"],"summary":"Get user (self) properties","description":"Get user (self) properties","operationId":"get_self","responses":{"200":{"description":"User's properties retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}},"security":[{"JWT_Access_Token":[]}]},"delete":{"tags":["users"],"summary":"Delete the user account","description":"Delete the user account","operationId":"delete_user","responses":{"204":{"description":"Successfully deleted"},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}},"security":[{"JWT_Access_Token":[]}]},"patch":{"tags":["users"],"summary":"Modify user (self) properties","description":"Modify user (self) properties","operationId":"edit_self","requestBody":{"description":"User to edit","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPost"}}},"required":true},"responses":{"200":{"description":"Successfully patched","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Json deserialize error: EOF while parsing an object at line 4 column 0","error_code":"JSON_PAYLOAD_ERROR","http_status":400}}}},"401":{"description":"User not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"description":"Trying to access private resource with missing or invalid credentials","error_code":"UNAUTHORIZED_ERROR","http_status":401}}}}},"security":[{"JWT_Access_Token":[]}]}}},"components":{"schemas":{"Album":{"type":"object","required":["id","owner_id","name","tags","shared_with","images"],"properties":{"id":{"$ref":"#/components/schemas/Uuid"},"images":{"type":"array","items":{"$ref":"#/components/schemas/ImageMetaData"}},"name":{"type":"string"},"owner_id":{"$ref":"#/components/schemas/Uuid"},"shared_with":{"type":"array","items":{"type":"string"}},"tags":{"type":"array","items":{"type":"string"}}}},"AlbumList":{"type":"object","required":["albums"],"properties":{"albums":{"type":"array","items":{"$ref":"#/components/schemas/Album"}}}},"AlbumPost":{"type":"object","required":["name","tags","shared_with","images"],"properties":{"images":{"type":"array","items":{"$ref":"#/components/schemas/Uuid"}},"name":{"type":"string"},"shared_with":{"type":"array","items":{"type":"string"}},"tags":{"type":"array","items":{"type":"string"}}}},"ApiError":{"type":"object","required":["http_status","error_code","description"],"properties":{"description":{"type":"string"},"error_code":{"$ref":"#/components/schemas/ApiErrorCode"},"http_status":{"type":"integer","format":"int32","minimum":0}}},"ApiErrorCode":{"type":"string","enum":["UNKNOWN","QUERY_PAYLOAD_ERROR","JSON_PAYLOAD_ERROR","PATH_ERROR","NOT_FOUND_ERROR","UNAUTHORIZED_ERROR","FORBIDDEN_ERROR","MISSING_IMAGE_PAYLOAD","IMAGE_PAYLOAD_TOO_LARGE","UNSUPPORTED_IMAGE_TYPE","INVALID_ENCODING","READ_ONLY"]},"AuthError":{"type":"object","required":["description","error_code","http_status"],"properties":{"description":{"type":"string","example":"some error description"},"error_code":{"type":"string","enum":["INVALID_CREDENTIALS","INVALID_AUTHORIZATION_HEADER","INVALID_TOKEN","OAUTH2_PROVIDER_ERROR","OAUTH2_AUTHORIZATION_DENIED","OAUTH2_INVALID_STATE","OAUTH2_FORBIDDEN","INVALID_CLIENT_TYPE","INTERNAL_ERROR"]},"http_status":{"type":"integer","example":401}}},"AuthErrorKind":{"type":"string","enum":["INVALID_CREDENTIALS","INVALID_AUTHORIZATION_HEADER","INVALID_TOKEN","OAUTH2_PROVIDER_ERROR","OAUTH2_AUTHORIZATION_DENIED","OAUTH2_INVALID_STATE","OAUTH2_FORBIDDEN","INVALID_CLIENT_TYPE","INTERNAL_ERROR"]},"AuthenticationResponse":{"allOf":[{"$ref":"#/components/schemas/PersistedUserInfo"},{"type":"object","required":["access_token","access_token_exp"],"properties":{"access_token":{"type":"string"},"access_token_exp":{"type":"string","format":"date-time"}}}]},"Binary":{"type":"string","format":"binary"},"ImageMetaData":{"type":"object","required":["id","owner_id","caption","tags","shared_with"],"properties":{"caption":{"type":"string"},"id":{"$ref":"#/components/schemas/Uuid"},"owner_id":{"$ref":"#/components/schemas/Uuid"},"shared_with":{"type":"array","items":{"type":"string"}},"tags":{"type":"array","items":{"type":"string"}}}},"ImagePatch":{"type":"object","properties":{"caption":{"type":"string","nullable":true},"tags":{"type":"array","items":{"type":"string"},"nullable":true}}},"ImagePayload":{"type":"object","required":["image"],"properties":{"image":{"$ref":"#/components/schemas/Binary"}}},"ImageQuality":{"type":"string","enum":["low","medium","high"]},"ImageUploadResponse":{"type":"object","required":["id"],"properties":{"id":{"$ref":"#/components/schemas/Uuid"}}},"ImagesMetaData":{"type":"object","required":["images"],"properties":{"images":{"type":"array","items":{"$ref":"#/components/schemas/ImageMetaData"}}}},"PersistedUserInfo":{"type":"object","required":["user_id","email","refresh_token_exp"],"properties":{"email":{"type":"string"},"family_name":{"type":"string","nullable":true},"given_name":{"type":"string","nullable":true},"name":{"type":"string","nullable":true},"refresh_token":{"type":"string","nullable":true},"refresh_token_exp":{"type":"string","format":"date-time"},"user_id":{"$ref":"#/components/schemas/Uuid"}}},"RefreshTokenParams":{"type":"object","required":["user_id","refresh_token"],"properties":{"refresh_token":{"type":"string","description":"Base64-encoded opaque binary token, preferably very long"},"user_id":{"$ref":"#/components/schemas/Uuid"}}},"User":{"type":"object","required":["id","name"],"properties":{"id":{"$ref":"#/components/schemas/Uuid"},"name":{"type":"string"}}},"UserList":{"type":"object","required":["users"],"properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}},"UserPost":{"type":"object","required":["name"],"properties":{"name":{"type":"string"}}},"Uuid":{"type":"string","format":"Uuid","example":"e58ed763-928c-4155-bee9-fdbaaadc15f3","maxLength":36,"minLength":36,"pattern":"^[0-9(a-f|A-F)]{8}-[0-9(a-f|A-F)]{4}-4[0-9(a-f|A-F)]{3}-[89ab][0-9(a-f|A-F)]{3}-[0-9(a-f|A-F)]{12}$"}},"securitySchemes":{"Google_OAuth2":{"type":"oauth2","flows":{"clientCredentials":{"tokenUrl":"http://localhost:8000/api/authorize/google","scopes":{}}},"description":"Google_OAuth2 flow (no need to fill client id)"},"JWT_Access_Token":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Bearer token for JWT access, retrieved from /auth/[provider]/authorize"}}},"tags":[{"name":"images","description":"Images management endpoints."},{"name":"albums","description":"Albums management endpoints."},{"name":"users","description":"Users management endpoints."},{"name":"auth","description":"Authentication management endpoints."}]}